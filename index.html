<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CAS 265 Google Books API Practice</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  </head>
  <body>
  <div class="wrapper">
    <form action="index.html" method="get">
      Search by ISNB (ISNB-10 or ISNB 13)
      <input type="text" name="isbn">
      <button type="submit">Search For Book</button>
    </form>
      <div class="links">
        <a href="index.html?isbn=0307887448" class="book1">Ready Player One</a>
        <a href="index.html?isbn=0142410314" class="book2">Charlie and The chocolate factory</a>
        <a href="index.html?isbn=0061124958" class="book3">Charlotte's Web</a>
        <a href="index.html?isbn=0618640150" class="book4">Lord of the Rings</a>
    </div>
    <span id="info">
      <img src="" id="bookThumb">
      <br>
      Author: <span id="authorName"></span>
      Description:<p id="description"></p>
    </span>
  </div>

  <script>
    var xhr = new XMLHttpRequest();
    // 0618640150

    var queryString = document.URL.substring(document.URL.indexOf('=') + 1);
    xhr.open("GET", "https://www.googleapis.com/books/v1/volumes?q=isbn:" + queryString, false);
    xhr.send();
    console.log(xhr.status); // if this returns 200, then you are in like Flynn
    var bookObject = JSON.parse(xhr.responseText);
    console.log(bookObject);
    $("title").text(bookObject.items[0].volumeInfo.title);
    $("h1").text(bookObject.items[0].volumeInfo.title);
    $("#authorName").text(bookObject.items[0].volumeInfo.authors[0]);
    $("#description").text(bookObject.items[0].volumeInfo.description);
    $('#bookThumb').attr("src", bookObject.items[0].volumeInfo.imageLinks.thumbnail);
    $("#stuff").text(bookObject.items[0].searchInfo.textSnippet);
  </script>
  </body>
</html>
